{"version":3,"file":"component---src-page-components-tag-articles-tsx-2b8040238e1199922960.js","mappings":"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","sources":["webpack://blog.nasustim.com/./src/components/organisms/articleList/index.tsx","webpack://blog.nasustim.com/./src/components/organisms/articleList/index.css.ts","webpack://blog.nasustim.com/./src/utils/paginationUtils/index.ts","webpack://blog.nasustim.com/./src/page-components/tag/articles.tsx"],"sourcesContent":["import { Link } from \"@/components/atoms/link\";\nimport { Tag } from \"@/components/atoms/tag\";\nimport { SITE_ORIGIN } from \"@/config\";\nimport { Fragment, useMemo, type FC } from \"react\";\nimport {\n  h2Style,\n  listItemStyle,\n  pagerStyle,\n  pStyle,\n  linkContentStyle,\n  tagListStyle,\n} from \"./index.css\";\nimport { toPlainText } from \"@/utils/markdownUtils\";\nimport { getIndexPagePath } from \"@/utils/paginationUtils\";\n\ntype ListItem = {\n  date: string;\n  slug: string;\n  title: string;\n  body: string;\n  tags?: string[];\n};\n\ntype TagData = {\n  tag: string;\n  tagSlug: string;\n  count: number;\n};\n\ntype Props = {\n  list: Array<ListItem>;\n  pagesCount: number;\n  currentPageIndex: number;\n  allTags?: TagData[];\n};\n\nexport const ArticleList: FC<Props> = ({\n  list,\n  pagesCount,\n  currentPageIndex,\n  allTags = [],\n}) => {\n  const needsPagination = pagesCount > 1;\n\n  return (\n    <div>\n      <ul>\n        {list.map((v) => (\n          <Fragment key={`article-list-${v.slug}`}>\n            <Item {...v} />\n          </Fragment>\n        ))}\n      </ul>\n      {needsPagination ? (\n        <Pager\n          currentPageIndex={currentPageIndex}\n          pagesCount={pagesCount}\n          allTags={allTags}\n        />\n      ) : null}\n      <TagsDisplay allTags={allTags} />\n    </div>\n  );\n};\n\nconst Item: FC<ListItem> = (v) => {\n  const bodyText = useMemo(() => {\n    let result = toPlainText(v.body);\n    if (result.length > 120) {\n      result = `${result.slice(0, 120)}...`;\n    }\n    return result;\n  }, [v.body]);\n\n  return (\n    <Fragment>\n      <li className={listItemStyle}>\n        <Link to={new URL(`/entry/${v.slug}`, SITE_ORIGIN)} noStyle>\n          <div className={linkContentStyle}>\n            <small>{v.date}</small>\n            <h2 className={h2Style}>{v.title}</h2>\n            <p className={pStyle}>{bodyText}</p>\n          </div>\n        </Link>\n      </li>\n    </Fragment>\n  );\n};\n\nconst Pager: FC<{\n  pagesCount: number;\n  currentPageIndex: number;\n  allTags: TagData[];\n}> = ({ pagesCount, currentPageIndex, allTags }) => (\n  <div>\n    <div className={pagerStyle}>\n      {Array.from({ length: pagesCount }).map((_, i) => {\n        const to = new URL(getIndexPagePath(i), SITE_ORIGIN);\n\n        if (i === currentPageIndex) {\n          return <div key={`pager-current-${i + 1}`}>{i + 1}</div>;\n        }\n        return (\n          <Link key={`pager-${to.toString()}`} to={to}>\n            {i + 1}\n          </Link>\n        );\n      })}\n    </div>\n  </div>\n);\n\nconst TagsDisplay: FC<{ allTags: TagData[] }> = ({ allTags }) =>\n  allTags.length !== 0 && (\n    <div className={tagListStyle}>\n      {allTags.map((tagData) => (\n        <Tag\n          key={tagData.tagSlug}\n          tag={`${tagData.tag} (${tagData.count})`}\n          tagSlug={tagData.tagSlug}\n          clickable\n        />\n      ))}\n    </div>\n  );\n","import \"src/style.css.ts.vanilla.css!=!../../../../node_modules/@vanilla-extract/webpack-plugin/virtualFileLoader/dist/vanilla-extract-webpack-plugin-virtualFileLoader.cjs.js?{\\\"fileName\\\":\\\"src/style.css.ts.vanilla.css\\\",\\\"source\\\":\\\"LnV4ZTRrajAgewogIC0tdXhlNGtqMTogIzQ5NDc1NzsKICAtLXV4ZTRrajI6ICNkOTRiOTU7CiAgLS11eGU0a2ozOiAjZGRkZGRjOwp9\\\"}!../../../../node_modules/@vanilla-extract/webpack-plugin/extracted.js\"\nimport \"src/components/templates/index.css.ts.vanilla.css!=!../../../../node_modules/@vanilla-extract/webpack-plugin/virtualFileLoader/dist/vanilla-extract-webpack-plugin-virtualFileLoader.cjs.js?{\\\"fileName\\\":\\\"src/components/templates/index.css.ts.vanilla.css\\\",\\\"source\\\":\\\"Ym9keSB7CiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7Cn0KLnJwanhwNDAgewogIHdpZHRoOiAxMDBzdnc7CiAgbWluLWhlaWdodDogMTAwc3ZoOwogIHBhZGRpbmc6IDA7CiAgbWFyZ2luOiAwOwogIGZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLCBSb2JvdG8sIHNhbnMtc2VyaWYsIHNlcmlmOwogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogc3RhcnQ7CiAgY29sb3I6IHZhcigtLXV4ZTRrajEpOwp9Ci5ycGp4cDQxIHsKICBoZWlnaHQ6IDEwMCU7CiAgcGFkZGluZzogMTZweDsKICB3aWR0aDogMTAwJTsKfQoucnBqeHA0MiB7CiAgd2lkdGg6IDEwMCU7CiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdXhlNGtqMyk7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKfQoucnBqeHA0MyB7CiAgZmxleC1ncm93OiAxOwp9Ci5ycGp4cDQ0IHsKICBtYXJnaW46IDE2cHggMDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZm9udC1zdHlsZTogaXRhbGljOwp9CkBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDg2MHB4KSB7CiAgLnJwanhwNDEgewogICAgd2lkdGg6IDg2MHB4OwogIH0KfQ==\\\"}!../../../../node_modules/@vanilla-extract/webpack-plugin/extracted.js\"\nimport \"src/components/organisms/articleList/index.css.ts.vanilla.css!=!../../../../node_modules/@vanilla-extract/webpack-plugin/virtualFileLoader/dist/vanilla-extract-webpack-plugin-virtualFileLoader.cjs.js?{\\\"fileName\\\":\\\"src/components/organisms/articleList/index.css.ts.vanilla.css\\\",\\\"source\\\":\\\"Ll8xYjMyc2tiMCB7CiAgbWFyZ2luOiA0NnB4IDAgMCAwOwogIGJvcmRlci1yYWRpdXM6IDhweDsKICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnMgZWFzZS1pbi1vdXQsIHRyYW5zZm9ybSAwLjFzIGVhc2UtaW4tb3V0Owp9Ci5fMWIzMnNrYjA6aG92ZXIgewogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4wNSk7CiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpOwp9Ci5fMWIzMnNrYjEgewogIGRpc3BsYXk6IGJsb2NrOwogIHBhZGRpbmc6IDE2cHggMnB4OwogIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICBjb2xvcjogaW5oZXJpdDsKfQouXzFiMzJza2IyIHsKICBmb250LXNpemU6IDI0cHg7CiAgZm9udC13ZWlnaHQ6IDQwMDsKfQouXzFiMzJza2IzIHsKICBmb250LXNpemU6IDE0cHg7CiAgZm9udC13ZWlnaHQ6IDQwMDsKfQouXzFiMzJza2I0IHsKICBtYXJnaW4tdG9wOiAyNHB4OwogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IHJvdzsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBnYXA6IDhweDsKfQouXzFiMzJza2I1IHsKICBtYXJnaW4tdG9wOiAyNHB4OwogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IHJvdzsKICBmbGV4LXdyYXA6IHdyYXA7CiAgZ2FwOiA4cHg7Cn0KQG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDogODYwcHgpIHsKICAuXzFiMzJza2IxIHsKICAgIHBhZGRpbmc6IDE2cHg7CiAgfQp9\\\"}!../../../../node_modules/@vanilla-extract/webpack-plugin/extracted.js\"\nexport var h2Style = '_1b32skb2';\nexport var linkContentStyle = '_1b32skb1';\nexport var listItemStyle = '_1b32skb0';\nexport var pStyle = '_1b32skb3';\nexport var pagerStyle = '_1b32skb4';\nexport var tagListStyle = '_1b32skb5';","export function getIndexPagePath(index: number): string {\n  return index === 0 ? \"/\" : `/p/${index + 1}`;\n}\n","import { graphql, type HeadFC, type PageProps } from \"gatsby\";\nimport { Template } from \"@/components/templates/\";\nimport { ArticleList } from \"@/components/organisms/articleList\";\nimport { CommonHead } from \"@/components/organisms/meta/common-head\";\nimport { z } from \"zod\";\n\nconst frontmatterSchema = z.object({\n  date: z.string(),\n  slug: z.string(),\n  title: z.string(),\n  draft: z.boolean(),\n  tags: z.array(z.string()).nullable(),\n});\n\nconst nodeSchema = z.object({\n  frontmatter: frontmatterSchema,\n  html: z.string(),\n});\n\ntype TagArticleQueryData = {\n  allMarkdownRemark: {\n    edges: Array<{\n      node: {\n        frontmatter: {\n          date: string;\n          slug: string;\n          title: string;\n          draft: boolean;\n          tags: string[] | null;\n        };\n        html: string;\n      };\n    }>;\n  };\n};\n\nconst TagArticlesPage: React.FC<\n  PageProps<TagArticleQueryData, TagPageContext>\n> = ({ data, location, pageContext }) => {\n  const { tag, currentPageIndex, pagesCount } = pageContext;\n\n  const list = data.allMarkdownRemark.edges.map((v) => {\n    const result = nodeSchema.safeParse(v.node);\n    if (result.error) {\n      throw new Error(result.error.message);\n    }\n    const { html, frontmatter } = result.data;\n\n    return {\n      title: frontmatter.title,\n      date: frontmatter.date,\n      slug: frontmatter.slug,\n      body: html,\n    };\n  });\n\n  return (\n    <Template pathname={location.pathname}>\n      <main>\n        <h3>Articles tagged with \"{tag}\"</h3>\n        <ArticleList\n          list={list}\n          currentPageIndex={currentPageIndex}\n          pagesCount={pagesCount}\n        />\n      </main>\n    </Template>\n  );\n};\n\nexport const query = graphql`\n  query TagArticlesPageQuery ($tag: String!, $skip: Int!, $limit: Int!) {\n    allMarkdownRemark(\n      sort: {frontmatter: {date: DESC}}\n      filter: { \n        frontmatter: { \n          draft: { eq: false }\n          tags: { in: [$tag] }\n        } \n      }\n      limit: $limit\n      skip: $skip\n    ) {\n      edges {\n        node {\n          frontmatter {\n            date(formatString: \"MMMM DD, YYYY\")\n            slug\n            title\n            draft\n            tags\n          }\n          html\n        }\n      }\n    }\n  }\n`;\n\nexport default TagArticlesPage;\n\nexport const Head: HeadFC<TagArticleQueryData, TagPageContext> = ({\n  pageContext,\n}) => {\n  const { tag } = pageContext;\n  return <CommonHead title={`Articles tagged with \"${tag}\"`} />;\n};\n"],"names":["ArticleList","_ref","list","pagesCount","currentPageIndex","allTags","needsPagination","_jsxs","children","_jsx","map","v","Fragment","Item","slug","Pager","TagsDisplay","bodyText","useMemo","result","toPlainText","body","length","slice","className","Link","to","URL","SITE_ORIGIN","noStyle","date","title","_ref2","Array","from","_","i","index","toString","_ref3","tagData","Tag","tag","count","tagSlug","clickable","frontmatterSchema","z","draft","tags","nullable","nodeSchema","frontmatter","html","data","location","pageContext","allMarkdownRemark","edges","safeParse","node","error","Error","message","Template","pathname","Head","CommonHead"],"sourceRoot":""}